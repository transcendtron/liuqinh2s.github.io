<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>git学习记录</title>
  <meta name="description" content="git是由Linus Torvalds在开发linux内核时发明的一种软件版本控制工具，其实这就是一个文件版本控制工具，协同写作也可以用git，会十分方便，github就是用的git。git是分布式的版本控制系统，而SVN是集中式的版本控制系统（也就是星型网络，必须要有一个中央服务器）。相关教程廖雪峰的Git教程...">

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/2017/01/git%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">
  <link rel="alternate" type="application/rss+xml" title="Liuqinh2s' Homepage" href="http://localhost:4000 /feed.xml " />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <img src="/imgs/Avatar.jpg" alt="" class="avatar">
  
  <a href="http://localhost:4000/" class="author_name">Liuqinh2s</a>
  <span class="author_job"></span>
  <span class="author_bio mbm">Interested in Virtual Reality & Augment Reality & Artificial Intelligence</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">首页</a>
        <span>/</span>
      </li>
       
      <li class="nav-item">
        <a href="http://localhost:4000/CV/">简历</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="http://localhost:4000/about">关于我</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">归档</a>
        
          <span>/</span>
        
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">分类</a>
        
          <span>/</span>
        
      </li>
            
      <li class="nav-item">
        <a href="http://localhost:4000/tags/">标签</a>
        
          <span>/</span>
        
      </li>
             
    </ul>
  </nav>
  <div class="social-links">
  <ul>
    <li><a href="http://github.com/liuqinh2s" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    <li><a href="http://www.weibo.com/liuqinh2s" class="social-link-item" target="_blank"><i class="fa fa-fw fa-weibo"></i></a></li>
    
    <li><a href="https://www.zhihu.com/people/liuqinh2s" class="social-link-item" target="_blank"><img src="/imgs/zhihu-small.png" height="15" width="15" alt="" class="zhihu"></a></li>
    <li><a href="mailto:liuqinh2s@gmail.com" class="social-link-item" target="_blank"><i class="fa fa-fw fa-envelope"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

  友情链接
<div class="friends-links">
    <a href="http://lianera.com" class="friends-link-item" target="_blank">lianera</a>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <!-- mathjax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<!-- 判断是否插入首页图片 -->


<!-- 添加日期和阅读 -->
<div id="post">
    <header class="post-header">
        <span class="post-meta">
            <span class="post-date">
                2017-01-20
            </span>
            •
            <span class="read-time" title="Estimated read time">
  
  
    2 mins read
  
</span>

        </span>
        <h1 title="git学习记录">git学习记录</h1>
    </header>

    <!-- 引入google code pretiffy高亮样式 -->
    <link href="/js/google-code-prettify/themes/github-v2.css" rel="stylesheet" type="text/css" />

    <!-- 添加博文 -->
    <article class="post-content">
        <p>git是由Linus Torvalds在开发linux内核时发明的一种软件版本控制工具，其实这就是一个文件版本控制工具，协同写作也可以用git，会十分方便，github就是用的git。git是分布式的版本控制系统，而SVN是集中式的版本控制系统（也就是星型网络，必须要有一个中央服务器）。</p>

<h1 id="相关教程">相关教程</h1>
<p><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">廖雪峰的Git教程</a>
<a href="https://www.w3ctrain.com/2016/06/26/learn-git-in-30-minutes/">30分钟git命令入门到放弃| w3cTrain</a>
<a href="https://en.wikipedia.org/wiki/Git">Git - Wikipedia</a>
<a href="https://git-scm.com/">Git官网</a>
<a href="https://git-scm.com/doc">git 官方文档</a>
<a href="https://marklodato.github.io/visual-git-guide/index-zh-cn.html">图解git</a>
<a href="https://try.github.io">Try Git: Git Tutorial</a>
<a href="https://git-scm.com/book/en/v2">Pro Git</a>
<a href="http://gitref.org/">Git Reference</a>
<a href="https://www.codeschool.com/courses/git-real/">Code School Git 教程</a>
<a href="https://www.codecademy.com/learn/learn-git">Codecadmy Git 教程</a>
<a href="https://guides.github.com/activities/hello-world/">githubguides</a></p>

<p>#配置git
安装完git,首要任务是配置我们的信息，最重要的是用户名及邮箱，打开终端，执行以下命令。</p>
<pre><code>git config --global user.name "My Name"w
git config --global user.email myEmail@example.com
</code></pre>
<p>配置好这两项，用户就能知道谁做了什么，并且一切都更有组织性了不是吗？</p>

<h1 id="常用git命令">常用git命令</h1>
<blockquote>
  <p>最常用的用红色字体标出了</p>
</blockquote>

<ul>
  <li>git init  //把当前目录变成一个带git版本控制的目录，简单的说就是变成git目录</li>
  <li>$\color{red}{git \ add \ .}$ //把所有修改过的东西都添加到git仓库，.表示当前目录</li>
  <li>git status    //看是否有改动还没有提交</li>
</ul>

<p>其实git会自己有提示，如上图那个黄色的叉叉就表示有新的改动没有提交。</p>
<ul>
  <li>git diff  file_name  //查看一个文件哪里被修改了</li>
  <li>git  commit  -m  “message”  //把添加的东西确认提交，并填写好确认信息（一般写上做了什么改动）
<strong>这里要讲的一点就是要尽量少的使用这条命令，而尽量多的使用git add，因为git commit会提交到版本库的最终状态（快照）树中，并通过HEAD和branch来管理这些版本，每个状态都应该是一个值得记住的状态（快照）才对，如果你拼命的提交就会产生非常多的快照，这样非常不利于管理。所以不要把git commit当git add使，有什么改动都先git add到暂存区，最后有了大的变动和有意义的变动或者解决了某个问题，再git commit到状态（快照）树中。</strong></li>
  <li>git log //查看日志（回顾历史版本）</li>
  <li>git reflog    //查看日志（回顾所有版本，及版本切换操作）</li>
  <li>git reset --hard HEAD^  //回退一个版本，HEAD代表当前版本，HEAD^表示上一个版本，HEAD^^表示上上个版本，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100，当然也可以通过版本号回去。</li>
</ul>

<p>如图是git log所输出的信息，commit后面跟着的就是版本号，按Q可以退出次界面。</p>
<ul>
  <li>git checkout – file_name     //撤销修改。
命令git checkout – readme.txt意思就是，把readme.txt文件在工作区的修改全部撤销，这里有两种情况：
一种是readme.txt自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；
一种是readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。
总之，就是让这个文件回到最近一次git commit或git add时的状态。
git checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</li>
</ul>

<p>#远端仓库
为了能够协同开发，我们需要把代码发布到远端仓库上。
##链接远端仓库-git remote add</p>
<pre><code>git remote add origin https://github.com/teasion/blog.git
</code></pre>
<p>一个项目可以同时拥有好几个远端仓库为了能够区分，通常会起不同的名字。通常主远端仓库被称为origin。</p>

<p>##上传到服务器-git push
每次我们要提交代码到服务器上时，都会使用到git push。
git push命令会有两个参数，远端仓库的名字，以及分支的名字：</p>
<pre><code>git push origin gh-pages
</code></pre>
<p>push过程你可能需要验证身份。
为此我们可以添加SSH密钥到github上。
这里有篇相关教程：<a href="https://segmentfault.com/a/1190000002645623">git-ssh 配置和使用</a>
##克隆仓库-git clone
放在Github上的开源项目，人们可以看到你的代码。可以使用 git clone进行下载到本地。</p>
<pre><code>git clone https://github.com/teasion/blog.git
</code></pre>
<p>本地也会创建一个新的仓库，并自动将github上的分支设为远端分支。</p>

<p>##从服务器上拉取代码-git pull</p>
<pre><code>git pull origin master
</code></pre>
<p>如果你更新了代码到仓库上，其他人可以通过git pull命令拉取你的变动</p>

<p>#分支讲解</p>

<p>当你在做一个新功能的时候，最好是在一个独立的区域上开发，通常称之为分支。分支之间相互独立，并且拥有自己的历史记录。这样做的原因是：
稳定版本的代码不会被破坏
不同的功能可以由不同开发者同时开发。
开发者可以专注于自己的分支，不用担心被其他人破坏了环境
在不确定之前，同一个特性可以拥有几个版本，便于比较
##创建新分支-git branch
每一个仓库的默认分支都叫master, 创建新分支可以这样：</p>
<pre><code>git branch amazing_new_feature
</code></pre>
<p>创建了一个名为amazing_new_feature的新分支，它跟当前分支同一起点</p>

<p>单独使用git branch，可以查看分支状态：</p>
<pre><code>$ git branch
  amazing_new_feature
* master
</code></pre>
<ul>
  <li>号表示当前活跃分支为master，使用git checkout切换分支。
##切换分支-git checkout
    <pre><code>git checkout amazing_new_feature
</code></pre>
    <p>##合并分支
我们的 amazing_new_feature 分支的任务是增加一个featuer.txt。我们来创建，添加到暂存区，提交。</p>
    <pre><code>$ git add feature.txt
$ git commit -m "New feature complete."
</code></pre>
    <p>新分支任务完成了，回到master分支</p>
    <pre><code>git checkout master
</code></pre>
    <p>现在去查看文件，你会发现，之前创建的feature.txt文件不见了，因为master分支上并没有feature.txt。使用git merge 把 amazing_new_feature 分支合并到master上。</p>
    <pre><code>git merge amazing_new_feature
</code></pre>
    <p>ok! 然后再把amazing_new_feature 分支删掉吧。</p>
    <pre><code>git branch -d amazing_new_feature
</code></pre>
    <p>#进阶操作
##比对两个不同提交之间的差别
每次提交都有一个唯一id，查看所有提交和他们的id，可以使用 git log:
查看某一次提交更新了什么，使用 git show 快照的ID（id 很长，但是你并不需要复制整个字符串，前一小部分就够了。）
查看两次提交的不同，可以使用git diff [commit-from]..[commit-to] 语法：</p>
    <pre><code>$ git diff 09bd8cc..ba25c0ff
diff --git a/feature.txt b/feature.txt
new file mode 100644
index 0000000..e69de29
diff --git a/hello.txt b/hello.txt
index e69de29..b546a21 100644
--- a/hello.txt
+++ b/hello.txt
@@ -0,0 +1 @@
+Nice weather today, isn't it?
</code></pre>
    <p>比较首次提交和最后一次提交，我们可以看到所有的更改。当然使用git difftool命令更加方便。
##回滚某个文件到之前的版本
git 允许我们将某个特定的文件回滚到特定的提交，使用的也是 git checkout。
下面的例子，我们将hello.txt回滚到最初的状态，需要指定回滚到哪个提交，以及文件的全路径。</p>
    <pre><code>git checkout 09bd8cc1 hello.txt
</code></pre>
    <p>##解决合并冲突
冲突经常出现在合并分支或者是拉去别人的代码。有些时候git能自动处理冲突，但大部分需要我们手动处理。
比如John 和 Tim 分别在各自的分支上写了两部分代码。
John 喜欢 for:</p>
    <pre><code>// Use a for loop to console.log contents.
for(var i=0; i&lt;arr.length; i++) {
console.log(arr[i]);
}
</code></pre>
    <p>Tim 喜欢 forEach:</p>
    <pre><code>// Use forEach to console.log contents.
arr.forEach(function(item) {
console.log(item);
});
</code></pre>
    <p>假设John 现在去拉取 Tim的代码:</p>
    <pre><code>$ git merge tim_branch
Auto-merging print_array.js
CONFLICT (content): Merge conflict in print_array.js
Automatic merge failed; fix conflicts and then commit the result.
</code></pre>
    <p>这时候git并不知道如何解决冲突，因为他不知道John和Tim谁写得更好。
于是它就在代码中插入标记。</p>
    <pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
// Use a for loop to console.log contents.
for(var i=0; i&lt;arr.length; i++) {
  console.log(arr[i]);
}
=======
// Use forEach to console.log contents.
arr.forEach(function(item) {
  console.log(item);
});
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Tim s commit.
</code></pre>
    <p>==== 号上方是当前最新一次提交，下方是冲突的代码。我们需要解决这样的冲突，经过组委会成员讨论，一致认定，在座的各位都是垃圾！两个都不要。改成下面的代码。</p>
    <pre><code>// Not using for loop or forEach.
// Use Array.toString() to console.log contents.
console.log(arr.toString());
</code></pre>
    <p>好了，再提交一下：</p>
    <pre><code>$ git add -A
$ git commit -m "Array printing conflict resolved."
</code></pre>
    <p>如果在大型项目中，这个过程可能容易出问题。你可以使用GUI 工具来帮助你。使用 git mergetool。
##配置.gitignore
大部分项目中，会有写文件，文件夹是我们不想提交的。为了防止一不小心提交，我们需要gitignore文件：</p>
    <ol>
      <li>在项目根目录创建.gitignore文件</li>
      <li>在文件中列出不需要提交的文件名，文件夹名，每个一行</li>
      <li>.gitignore文件需要提交，就像普通文件一样</li>
    </ol>
  </li>
</ul>

<p>通常会被ignore的文件有：</p>
<ul>
  <li>log文件</li>
  <li>task runner builds</li>
  <li>node_modules等文件夹</li>
  <li>IDEs生成的文件</li>
  <li>个人笔记
例如：
    <pre><code>*.log
build/
node_modules/
.idea/
my_notes.txt
</code></pre>
  </li>
</ul>

<p>#git概念和原理
<strong>工作区（Working Directory）</strong>，就是你电脑中能看到的目录。
<strong>版本库（Repository）</strong>，工作区有个隐藏目录.git，这个不算工作区，而是git的版本库。
Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支master，以及指向master的一个指针叫HEAD。</p>

<p>前面讲了我们把文件往Git版本库里添加的时候，是分两步执行的：
第一步是用git add把文件添加进去，实际上就是把文件修改添加到暂存区；
第二步是用git commit提交更改，实际上就是把暂存区的所有内容提交到当前分支。
因为我们创建Git版本库时，Git自动为我们创建了唯一一个master分支，所以，现在，git commit就是往master分支上提交更改。
你可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。
每次修改，如果不add到暂存区，那就不会加入到commit中。</p>

<p>#实用git工具
<a href="https://www.gitignore.io/">在线创建.gitignore</a>
<a href="https://git-scm.com/doc">git 官方文档</a></p>

    </article>
</div>


<!-- 引入google code pretiffy -->
<script src="/js/jquery.min.js"></script>
<script src="/js/google-code-prettify/prettify.js"></script>
<script type="text/javascript">
    $(function(){
      $("pre").addClass("prettyprint linenums");
      prettyPrint();
      });
    </script>

<!-- 添加博文分割线 -->
<hr class="post-list__divider" />
<section>
       <ul class="pager">
        
        <li class="previous">
            <a href="/2017/01/Python%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E4%B9%8BBombMan/" data-toggle="tooltip" data-placement="top" title="Python游戏开发之BombMan">上一篇：  <span>Python游戏开发之BombMan</span>
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2017/01/markdown%E8%AF%AD%E6%B3%95/" data-toggle="tooltip" data-placement="top" title="markdown语法">下一篇：  <span>markdown语法</span>
            </a>
        </li>
        
    </ul>
</section>


<!-- 多说评论框 start -->

<div class="ds-thread" data-thread-key="http://localhost:4000" data-title="git学习记录" data-url="http://localhost:4000"></div>
<!-- 多说评论框 end -->

<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"liuqinh2s"};
    (function() {
     var ds = document.createElement('script');
     ds.type = 'text/javascript';ds.async = true;
     ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
     ds.charset = 'UTF-8';
     (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
     })();
    </script>
<!-- 多说公共JS代码 end -->


        <footer>
  &copy; 2017 Liuqinh2s <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> Themes <a href="http://github.com/renyuanz/leonids/" target="_blank">Leonids</a>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62251910-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>
